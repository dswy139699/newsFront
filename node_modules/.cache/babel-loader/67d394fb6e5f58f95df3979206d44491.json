{"remainingRequest":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js!/Users/yushengnan/bysj/ysn/node_modules/eslint-loader/index.js??ref--13-0!/Users/yushengnan/bysj/ysn/src/utils/request.js","dependencies":[{"path":"/Users/yushengnan/bysj/ysn/src/utils/request.js","mtime":1650717659370},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vIGltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwovLyBpbXBvcnQgc3RvcmFnZSBmcm9tICdzdG9yZScKCmltcG9ydCBub3RpZmljYXRpb24gZnJvbSAnYW50LWRlc2lnbi12dWUvZXMvbm90aWZpY2F0aW9uJzsKaW1wb3J0IHsgVnVlQXhpb3MgfSBmcm9tICcuL2F4aW9zJzsgLy8gaW1wb3J0IHsgQUNDRVNTX1RPS0VOIH0gZnJvbSAnQC9zdG9yZS9tdXRhdGlvbi10eXBlcycKCmltcG9ydCB7IExTdG9yYWdlIH0gZnJvbSAnQC9zdG9yZS9zZXNzaW9uLmpzJzsgLy8g5Yib5bu6IGF4aW9zIOWunuS+iwoKdmFyIHJlcXVlc3QgPSBheGlvcy5jcmVhdGUoewogIC8vIEFQSSDor7fmsYLnmoTpu5jorqTliY3nvIAKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9CQVNFX1VSTCwKICB0aW1lb3V0OiA2MDAwIC8vIOivt+axgui2heaXtuaXtumXtAoKfSk7IC8vIOW8guW4uOaLpuaIquWkhOeQhuWZqAoKdmFyIGVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIGVycm9ySGFuZGxlcihlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgdmFyIGRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhOyAvLyDku44gbG9jYWxzdG9yYWdlIOiOt+WPliB0b2tlbgogICAgLy8gY29uc3QgdG9rZW4gPSBzdG9yYWdlLmdldChBQ0NFU1NfVE9LRU4pCgogICAgdmFyIGZsYWcgPSB0cnVlOwoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgICBmbGFnID0gZmFsc2U7CiAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJzQwMyxGb3JiaWRkZW4nLAogICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLm1lc3NhZ2UKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnNDAxJywKICAgICAgICBkZXNjcmlwdGlvbjogJ+adg+mZkOmqjOivgeWksei0pe+8jOivt+mHjeaWsOeZu+W9lScKICAgICAgfSk7IC8vIGlmICh0b2tlbikgewogICAgICAvLyAgIHN0b3JlLmRpc3BhdGNoKCdMb2dvdXQnKS50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgLy8gICAgIH0sIDE1MDApCiAgICAgIC8vICAgfSkKICAgICAgLy8gfQogICAgfQoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgewogICAgICBmbGFnID0gZmFsc2U7CiAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJzQwNCcsCiAgICAgICAgZGVzY3JpcHRpb246ICdOb3RGb3VuZCcKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNTAxKSB7CiAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnNTAxJywKICAgICAgICBkZXNjcmlwdGlvbjogJ05vdCBpbXBsZW1lbnRlZCcKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNTAzKSB7CiAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnNTAzJywKICAgICAgICBkZXNjcmlwdGlvbjogJ1NlcnZpY2UgVW5hdmFpbGFibGUnCiAgICAgIH0pOwogICAgfQoKICAgIGlmIChmbGFnKSB7CiAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJ+mUmeivrycsCiAgICAgICAgZGVzY3JpcHRpb246ICgoZXJyb3IucmVzcG9uc2UgfHwge30pLmRhdGEgfHwge30pLm1lc3NhZ2UgfHwgJ+ivt+axguWHuueOsOmUmeivr++8jOivt+eojeWQjuWGjeivlScsCiAgICAgICAgZHVyYXRpb246IDQKICAgICAgfSk7CiAgICB9CiAgfSAvLyBlbHNlIHsKICAvLyAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgLy8gICAgIG1lc3NhZ2U6ICfplJnor68nLAogIC8vICAgICBkZXNjcmlwdGlvbjogZXJyb3IsCiAgLy8gICAgIGR1cmF0aW9uOiA0CiAgLy8gICB9KQogIC8vIH0KCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn07IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCgpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gTFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsgLy8g5aaC5p6cIHRva2VuIOWtmOWcqAogIC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iSB0b2tlbiDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gdG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBlcnJvckhhbmRsZXIpOyAvLyByZXNwb25zZSBpbnRlcmNlcHRvcgoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDApIHsKICAgIHJldHVybiByZXNwb25zZS5kYXRhLmRhdGE7CiAgfSBlbHNlIHsKICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgIG1lc3NhZ2U6ICfplJnor68nLAogICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfor7fmsYLlh7rnjrDplJnor6/vvIzor7fnqI3lkI7lho3or5UnLAogICAgICBkdXJhdGlvbjogNAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpOwogIH0gLy8gaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAvLyByZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhCiAgLy8gaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogIC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgLy8gICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgLy8gICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YS5kYXRhKQogIC8vICAgfSBlbHNlIHsKICAvLyAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAvLyAgICAgICBtZXNzYWdlOiAn6ZSZ6K+vJywKICAvLyAgICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfor7fmsYLlh7rnjrDplJnor6/vvIzor7fnqI3lkI7lho3or5UnLAogIC8vICAgICAgIGR1cmF0aW9uOiA0CiAgLy8gICAgIH0pCiAgLy8gICAgIHJlamVjdChyZXNwb25zZS5kYXRhLmRhdGEpCiAgLy8gICB9CiAgLy8gfSkKICAvLyB9IGVsc2UgewogIC8vICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEKICAvLyB9CiAgLy8gfQogIC8vIHJldHVybiByZXNwb25zZQoKfSwgZXJyb3JIYW5kbGVyKTsKdmFyIGluc3RhbGxlciA9IHsKICB2bToge30sCiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUpIHsKICAgIFZ1ZS51c2UoVnVlQXhpb3MsIHJlcXVlc3QpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgcmVxdWVzdDsKZXhwb3J0IHsgaW5zdGFsbGVyIGFzIFZ1ZUF4aW9zLCByZXF1ZXN0IGFzIGF4aW9zIH07"},{"version":3,"sources":["/Users/yushengnan/bysj/ysn/src/utils/request.js"],"names":["axios","notification","VueAxios","LStorage","request","create","baseURL","process","env","VUE_APP_API_BASE_URL","timeout","errorHandler","error","response","data","flag","status","message","description","duration","Promise","reject","interceptors","use","config","token","getItem","headers","code","installer","vm","install","Vue"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;AACA;;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,SAASC,QAAT,QAAyB,SAAzB,C,CACA;;AACA,SAASC,QAAT,QAAyB,oBAAzB,C,CAEA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3B;AACAC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,oBAFM;AAG3BC,EAAAA,OAAO,EAAE,IAHkB,CAGb;;AAHa,CAAb,CAAhB,C,CAMA;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC9B,MAAIA,KAAK,CAACC,QAAV,EAAoB;AAClB,QAAMC,IAAI,GAAGF,KAAK,CAACC,QAAN,CAAeC,IAA5B,CADkB,CAElB;AACA;;AACA,QAAIC,IAAI,GAAG,IAAX;;AACA,QAAIH,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,MAAAA,IAAI,GAAG,KAAP;AACAd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,QAAAA,OAAO,EAAE,eADQ;AAEjBC,QAAAA,WAAW,EAAEJ,IAAI,CAACG;AAFD,OAAnB;AAID;;AACD,QAAIL,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,MAAAA,IAAI,GAAG,KAAP;AACAd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,QAAAA,OAAO,EAAE,KADQ;AAEjBC,QAAAA,WAAW,EAAE;AAFI,OAAnB,EAFiC,CAMjC;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AACD,QAAIN,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,MAAAA,IAAI,GAAG,KAAP;AACAd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,QAAAA,OAAO,EAAE,KADQ;AAEjBC,QAAAA,WAAW,EAAE;AAFI,OAAnB;AAID;;AACD,QAAIN,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,MAAAA,IAAI,GAAG,KAAP;AACAd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,QAAAA,OAAO,EAAE,KADQ;AAEjBC,QAAAA,WAAW,EAAE;AAFI,OAAnB;AAID;;AACD,QAAIN,KAAK,CAACC,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,MAAAA,IAAI,GAAG,KAAP;AACAd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,QAAAA,OAAO,EAAE,KADQ;AAEjBC,QAAAA,WAAW,EAAE;AAFI,OAAnB;AAID;;AACD,QAAIH,IAAJ,EAAU;AACTd,MAAAA,YAAY,CAACW,KAAb,CAAmB;AAChBK,QAAAA,OAAO,EAAE,IADO;AAEhBC,QAAAA,WAAW,EAAE,CAAC,CAACN,KAAK,CAACC,QAAN,IAAkB,EAAnB,EAAuBC,IAAvB,IAA+B,EAAhC,EAAoCG,OAApC,IAA+C,cAF5C;AAGhBE,QAAAA,QAAQ,EAAE;AAHM,OAAnB;AAKA;AACF,GAvD6B,CAwD9B;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeT,KAAf,CAAP;AACD,CAhED,C,CAkEA;;;AACAR,OAAO,CAACkB,YAAR,CAAqBlB,OAArB,CAA6BmB,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC,MAAMC,KAAK,GAAGtB,QAAQ,CAACuB,OAAT,CAAiB,OAAjB,CAAd,CADyC,CAEzC;AACA;;AACA,MAAID,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,IAAkCF,KAAlC;AACD;;AACD,SAAOD,MAAP;AACD,CARD,EAQGb,YARH,E,CAUA;;AACAP,OAAO,CAACkB,YAAR,CAAqBT,QAArB,CAA8BU,GAA9B,CAAkC,UAACV,QAAD,EAAc;AAC9C;AACA,MAAIA,QAAQ,CAACC,IAAT,CAAcc,IAAd,KAAuB,CAA3B,EAA8B;AAC5B,WAAOf,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACD,GAFD,MAEO;AACLb,IAAAA,YAAY,CAACW,KAAb,CAAmB;AACjBK,MAAAA,OAAO,EAAE,IADQ;AAEjBC,MAAAA,WAAW,EAAEL,QAAQ,CAACC,IAAT,CAAcG,OAAd,IAAyB,cAFrB;AAGjBE,MAAAA,QAAQ,EAAE;AAHO,KAAnB;AAKA,WAAOC,OAAO,CAACC,MAAR,CAAeR,QAAf,CAAP;AACD,GAX6C,CAY9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACD,CAjCD,EAiCGF,YAjCH;AAmCA,IAAMkB,SAAS,GAAG;AAChBC,EAAAA,EAAE,EAAE,EADY;AAEhBC,EAAAA,OAFgB,mBAEPC,GAFO,EAEF;AACZA,IAAAA,GAAG,CAACT,GAAJ,CAAQrB,QAAR,EAAkBE,OAAlB;AACD;AAJe,CAAlB;AAOA,eAAeA,OAAf;AAEA,SACEyB,SAAS,IAAI3B,QADf,EAEEE,OAAO,IAAIJ,KAFb","sourcesContent":["import axios from 'axios'\n// import store from '@/store'\n// import storage from 'store'\nimport notification from 'ant-design-vue/es/notification'\nimport { VueAxios } from './axios'\n// import { ACCESS_TOKEN } from '@/store/mutation-types'\nimport { LStorage } from '@/store/session.js'\n\n// 创建 axios 实例\nconst request = axios.create({\n  // API 请求的默认前缀\n  baseURL: process.env.VUE_APP_API_BASE_URL,\n  timeout: 6000 // 请求超时时间\n})\n\n// 异常拦截处理器\nconst errorHandler = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    // 从 localstorage 获取 token\n    // const token = storage.get(ACCESS_TOKEN)\n    let flag = true\n    if (error.response.status === 403) {\n      flag = false\n      notification.error({\n        message: '403,Forbidden',\n        description: data.message\n      })\n    }\n    if (error.response.status === 401) {\n      flag = false\n      notification.error({\n        message: '401',\n        description: '权限验证失败，请重新登录'\n      })\n      // if (token) {\n      //   store.dispatch('Logout').then(() => {\n      //     setTimeout(() => {\n      //       window.location.reload()\n      //     }, 1500)\n      //   })\n      // }\n    }\n    if (error.response.status === 404) {\n      flag = false\n      notification.error({\n        message: '404',\n        description: 'NotFound'\n      })\n    }\n    if (error.response.status === 501) {\n      flag = false\n      notification.error({\n        message: '501',\n        description: 'Not implemented'\n      })\n    }\n    if (error.response.status === 503) {\n      flag = false\n      notification.error({\n        message: '503',\n        description: 'Service Unavailable'\n      })\n    }\n    if (flag) {\n     notification.error({\n        message: '错误',\n        description: ((error.response || {}).data || {}).message || '请求出现错误，请稍后再试',\n        duration: 4\n      })\n    }\n  }\n  // else {\n  //   notification.error({\n  //     message: '错误',\n  //     description: error,\n  //     duration: 4\n  //   })\n  // }\n  return Promise.reject(error)\n}\n\n// request interceptor\nrequest.interceptors.request.use(config => {\n  const token = LStorage.getItem('token')\n  // 如果 token 存在\n  // 让每个请求携带自定义 token 请根据实际情况自行修改\n  if (token) {\n    config.headers['Authorization'] = token\n  }\n  return config\n}, errorHandler)\n\n// response interceptor\nrequest.interceptors.response.use((response) => {\n  // console.log(response)\n  if (response.data.code === 0) {\n    return response.data.data\n  } else {\n    notification.error({\n      message: '错误',\n      description: response.data.message || '请求出现错误，请稍后再试',\n      duration: 4\n    })\n    return Promise.reject(response)\n  }\n  // if (response.data) {\n  // return response.data.data\n  // if (response.data.success) {\n  // return new Promise((resolve, reject) => {\n  //   if (response.data.success) {\n  //     resolve(response.data.data)\n  //   } else {\n  //     notification.error({\n  //       message: '错误',\n  //       description: response.data.message || '请求出现错误，请稍后再试',\n  //       duration: 4\n  //     })\n  //     reject(response.data.data)\n  //   }\n  // })\n\n  // } else {\n  //   return response.data\n  // }\n  // }\n  // return response\n}, errorHandler)\n\nconst installer = {\n  vm: {},\n  install (Vue) {\n    Vue.use(VueAxios, request)\n  }\n}\n\nexport default request\n\nexport {\n  installer as VueAxios,\n  request as axios\n}\n"]}]}