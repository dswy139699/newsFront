{"remainingRequest":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js!/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yushengnan/bysj/ysn/src/views/user/studentLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yushengnan/bysj/ysn/src/views/user/studentLogin.vue","mtime":1650638391897},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy95dXNoZW5nbmFuL2J5c2oveXNuL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1c3RvbUFjdGl2ZUtleTogJ3RhYjEnLAogICAgICBsb2dpbkJ0bjogZmFsc2UsCiAgICAgIGxvZ2luVHlwZTogMCwKICAgICAgaXNMb2dpbkVycm9yOiBmYWxzZSwKICAgICAgcmVxdWlyZWRUd29TdGVwQ2FwdGNoYTogZmFsc2UsCiAgICAgIHN0ZXBDYXB0Y2hhVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwKICAgICAgc3RhdGU6IHsKICAgICAgICB0aW1lOiA2MCwKICAgICAgICBsb2dpbkJ0bjogZmFsc2UsCiAgICAgICAgbG9naW5UeXBlOiAwLAogICAgICAgIHNtc1NlbmRCdG46IGZhbHNlCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2lzTW9iaWxlJywgJ3NjaG9vbE5hbWVMaXN0J10pKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5HZXRTY2hvb2woKTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ0xvZ2luJywgJ0xvZ291dCcsICdHZXRTY2hvb2wnLCAnR2V0Q2xhc3MnXSkpLCB7fSwgewogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB2YWxpZGF0ZUZpZWxkcyA9IHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcywKICAgICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZTsKICAgICAgc3RhdGUubG9naW5CdG4gPSB0cnVlOwogICAgICB2YWxpZGF0ZUZpZWxkcyhmdW5jdGlvbiAoZXJyLCB2YWx1ZXMpIHsKICAgICAgICBpZiAoIWVycikgey8vIHRoaXMuJHJvdXRlci5hZGRSb3V0ZXModGhpcy4kc3RvcmUuZ2V0dGVycy5hZGRSb3V0ZXJzKQogICAgICAgICAgLy8gY29uc3QgZGF0YSA9IHsgLi4udmFsdWVzIH0KICAgICAgICAgIC8vIExvZ2luKGRhdGEpCiAgICAgICAgICAvLyAgICAgICAgIC50aGVuKChyZXMpID0+IHRoaXMubG9naW5TdWNjZXNzKHJlcykpCiAgICAgICAgICAvLyAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy5yZXF1ZXN0RmFpbGVkKGVycikpCiAgICAgICAgICAvLyAgICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIC8vICAgICAgICAgICBzdGF0ZS5sb2dpbkJ0biA9IGZhbHNlCiAgICAgICAgICAvLyAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzdGF0ZS5sb2dpbkJ0biA9IGZhbHNlOwogICAgICAgICAgfSwgNjAwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ2luU3VjY2VzczogZnVuY3Rpb24gbG9naW5TdWNjZXNzKHJlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gdGhpcy5HZXRTY2hvb2woKS50aGVuKCkuY2F0Y2goKS5maW5hbGx5KHJlc3BvbnNlID0+IHsKICAgICAgLy8gICB0aGlzLkdldENsYXNzKCkudGhlbigpCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdHZW5lcmF0ZVJvdXRlcycsIHsKICAgICAgICByb2xlczogW10sCiAgICAgICAgdXNlcjogcmVzLnVzZXIgfHwge30KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5YaZ5q276KeS6Imy77yM5a6e6ZmF5bqU6K+l5qC55o2u5ZCO5Y+w5Lyg6L+H5p2l55qE6KeS6Imy5L+h5oGvCiAgICAgICAgLy8g5qC55o2ucm9sZXPmnYPpmZDnlJ/miJDlj6/orr/pl67nmoTot6/nlLHooagKICAgICAgICAvLyDliqjmgIHmt7vliqDlj6/orr/pl67ot6/nlLHooagKICAgICAgICBfdGhpcy4kcm91dGVyLmFkZFJvdXRlcyhfdGhpcy4kc3RvcmUuZ2V0dGVycy5hZGRSb3V0ZXJzKTsKCiAgICAgICAgaWYgKHJlcyAmJiByZXMudXNlciAmJiByZXMudXNlci51c2VyVHlwZSAmJiByZXMudXNlci51c2VyVHlwZSA9PT0gJ3NjaG9vbCcpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvYm9vay9zb2xpY2l0TWFuYWdlL2NvdXJzZU1hbmFnZScKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAocmVzICYmIHJlcy51c2VyICYmIHJlcy51c2VyLnVzZXJUeXBlICYmIHJlcy51c2VyLnVzZXJUeXBlID09PSAnc3R1ZGVudCcpIHsKICAgICAgICAgIGlmICghcmVzLnVzZXIudGVsUGhvbmUgfHwgcmVzLnVzZXIuZW5hYmxlQWRkcmVzcykgewogICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIHBhdGg6ICcvYm9vay9zdHVkZW50L3N0dWRlbnRJbmZvJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogJy9ib29rL3N0dWRlbnQvdW5QYXllZCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsgLy8gfSkKCiAgICAgIHRoaXMuaXNMb2dpbkVycm9yID0gZmFsc2U7CiAgICB9LAogICAgcmVxdWVzdEZhaWxlZDogZnVuY3Rpb24gcmVxdWVzdEZhaWxlZChlcnIpIHsKICAgICAgdGhpcy5pc0xvZ2luRXJyb3IgPSB0cnVlOwogICAgICB0aGlzLiRub3RpZmljYXRpb25bJ2Vycm9yJ10oewogICAgICAgIG1lc3NhZ2U6ICfplJnor68nLAogICAgICAgIGRlc2NyaXB0aW9uOiAoKGVyci5yZXNwb25zZSB8fCB7fSkuZGF0YSB8fCB7fSkubWVzc2FnZSB8fCAn6K+35rGC5Ye6546w6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+VJywKICAgICAgICBkdXJhdGlvbjogNAogICAgICB9KTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["studentLogin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"main\">\n    <a-form\n      id=\"formLogin\"\n      class=\"user-layout-login\"\n      ref=\"formLogin\"\n      :form=\"form\"\n      :label-col=\"{ span: 5 }\"\n      :wrapper-col=\"{ span: 19 }\"\n      @submit=\"handleSubmit\"\n    >\n      <div style=\"margin-top:70px;\">\n        <a-alert v-if=\"isLoginError\" type=\"error\" showIcon style=\"margin-bottom: 24px;\" message=\"账户或密码错误\" />\n        <a-form-item label=\"用户名\">\n          <a-input\n            size=\"large\"\n            type=\"text\"\n            placeholder=\"请输入用户名\"\n            v-decorator=\"[\n              'loginId',\n              {rules: [{ required: true, message: '请输入用户名' }]}\n            ]\"\n          >\n            <a-icon slot=\"prefix\" type=\"user\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n          </a-input>\n        </a-form-item>\n\n        <a-form-item label=\"密码\">\n          <a-input-password\n            size=\"large\"\n            placeholder=\"请输入密码\"\n            v-decorator=\"[\n              'loginPwd',\n              {rules: [{ required: true, message: '请输入密码' }]}\n            ]\"\n          >\n            <a-icon slot=\"prefix\" type=\"lock\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n          </a-input-password>\n        </a-form-item>\n        <a-form-item label=\"学校\">\n          <a-select\n            placeholder=\"请选择学校\"\n            size=\"large\"\n            style=\"width:100%\"\n            v-decorator=\"[\n              'schoolId',\n              {rules: [{ required: true, message: '请选择学校' }]}\n            ]\"\n          >\n            <a-select-option v-for=\"item in schoolNameList\" :key=\"item.schoolId\" :value=\"item.value\">\n              {{ item.label }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n      </div>\n      <a-form-item style=\"margin-top:24px\" :wrapper-col=\"{ span: 19, offset: isMobile ? 0 : 5 }\" >\n        <a-button\n          size=\"large\"\n          type=\"primary\"\n          htmlType=\"submit\"\n          class=\"login-button\"\n          :loading=\"state.loginBtn\"\n          :disabled=\"state.loginBtn\"\n        >确定</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n</template>\n\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n\n  export default {\n    components: {\n    },\n    data () {\n      return {\n        customActiveKey: 'tab1',\n        loginBtn: false,\n        loginType: 0,\n        isLoginError: false,\n        requiredTwoStepCaptcha: false,\n        stepCaptchaVisible: false,\n        form: this.$form.createForm(this),\n        state: {\n          time: 60,\n          loginBtn: false,\n          loginType: 0,\n          smsSendBtn: false\n        }\n      }\n    },\n    computed: {\n      ...mapGetters(['isMobile', 'schoolNameList'])\n    },\n    created () {\n      this.GetSchool()\n    },\n    methods: {\n      ...mapActions(['Login', 'Logout', 'GetSchool', 'GetClass']),\n      handleSubmit (e) {\n        e.preventDefault()\n        const {\n          form: { validateFields },\n          state\n          // Login\n        } = this\n        state.loginBtn = true\n        validateFields((err, values) => {\n          if (!err) {\n            // this.$router.addRoutes(this.$store.getters.addRouters)\n            // const data = { ...values }\n            // Login(data)\n            //         .then((res) => this.loginSuccess(res))\n            //         .catch(err => this.requestFailed(err))\n            //         .finally(() => {\n            //           state.loginBtn = false\n            //         })\n          } else {\n            setTimeout(() => {\n              state.loginBtn = false\n            }, 600)\n          }\n        })\n      },\n      loginSuccess (res) {\n        // this.GetSchool().then().catch().finally(response => {\n        //   this.GetClass().then()\n          this.$store.dispatch('GenerateRoutes', { roles: [], user: res.user || {} }).then(() => { // 写死角色，实际应该根据后台传过来的角色信息\n            // 根据roles权限生成可访问的路由表\n            // 动态添加可访问路由表\n            this.$router.addRoutes(this.$store.getters.addRouters)\n            if (res && res.user && res.user.userType && res.user.userType === 'school') {\n              this.$router.push({ path: '/book/solicitManage/courseManage' })\n            } else if (res && res.user && res.user.userType && res.user.userType === 'student') {\n              if (!res.user.telPhone || res.user.enableAddress) {\n                  this.$router.push({ path: '/book/student/studentInfo' })\n              } else {\n                this.$router.push({ path: '/book/student/unPayed' })\n              }\n            }\n          })\n        // })\n        this.isLoginError = false\n      },\n      requestFailed (err) {\n        this.isLoginError = true\n        this.$notification['error']({\n          message: '错误',\n          description: ((err.response || {}).data || {}).message || '请求出现错误，请稍后再试',\n          duration: 4\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .main{\n  }\n  .user-layout-login {\n    label {\n      font-size: 14px;\n    }\n\n    .getCaptcha {\n      display: block;\n      width: 100%;\n      height: 40px;\n    }\n\n    .forge-password {\n      font-size: 14px;\n    }\n\n    button.login-button {\n      padding: 0 15px;\n      font-size: 16px;\n      height: 40px;\n      width: 100%;\n    }\n\n    .user-login-other {\n      text-align: left;\n      margin-top: 24px;\n      line-height: 22px;\n\n      .item-icon {\n        font-size: 24px;\n        color: rgba(0, 0, 0, 0.2);\n        margin-left: 16px;\n        vertical-align: middle;\n        cursor: pointer;\n        transition: color 0.3s;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n\n      .register {\n        float: right;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/views/user"}]}