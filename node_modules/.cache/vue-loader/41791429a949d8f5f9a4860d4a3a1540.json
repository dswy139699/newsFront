{"remainingRequest":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue","mtime":1650704211080},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZvcm1EYXRhIH0gZnJvbSAnLi9mb3JtRGF0YScKaW1wb3J0IHsgdXBkYXRlU3R1ZGVudCwgZ2V0U3R1ZGVudEJ5SWQgfSBmcm9tICdAL2FwaS9zdHVkZW50JwppbXBvcnQgeyBjaGVja1Bob25lIH0gZnJvbSAnQC91dGlscy9jaGVja0Z1bicKaW1wb3J0IEUgZnJvbSAnd2FuZ2VkaXRvcicKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdJbmRleCcsCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB1c2VySW5mbzoge30sCiAgICAgICAgICBlZGl0Q29udGVudDogJycKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBnZXRGb3JtRGF0YSAoKSB7CiAgICAgICAgICAgIHJldHVybiBmb3JtRGF0YS5nZXRJbmNyZWFzZUZvcm0odGhpcywgJ25ld3MnKQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgICBjb25zdCB1c2VySW5mbyA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8gfHwge30KICAgICAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm8KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgY29uc3QgZWRpdG9yID0gbmV3IEUoJyNlZGl0RWxlbScpCiAgICAgIGVkaXRvci5jdXN0b21Db25maWcuc2hvd0xpbmtJbWcgPSBmYWxzZQogICAgICBlZGl0b3IuY3VzdG9tQ29uZmlnLm9uY2hhbmdlID0gKGgpID0+IHsKICAgICAgICB0aGlzLmVkaXRDb250ZW50ID0gaAogICAgICB9CiAgICAgIGVkaXRvci5jcmVhdGUoKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgb25TdWJtaXQgKCkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuJHJlZnMubmV3c0luZm8uaGFuZGxlU3VibWl0KCkKICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXJhbXMpCiAgICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIH0KICAgICAgfSwKICAgICAgYmVmb3JlVXBsb2FkIChmaWxlKSB7CiAgICAgICAgLy8gYXBwbGljYXRpb24vcGRmCiAgICAgICAgLy8gY29uc29sZS5sb2coZmlsZSkKICAgICAgICAvLyBpZiAoZmlsZSAmJiBmaWxlLm5hbWUgJiYgKGZpbGUubmFtZS5pbmRleE9mKCcuJykgIT09IC0xKSAmJiBmaWxlLm5hbWUuc3BsaXQoJy4nKVtmaWxlLm5hbWUuc3BsaXQoJy4nKS5sZW5ndGggLSAxXS50b1VwcGVyQ2FzZSgpID09PSAnUERGJykgewogICAgICAgIC8vICAgcmV0dXJuIHRydWUKICAgICAgICAvLyB9IGVsc2UgewogICAgICAgIC8vICAgdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAvLyAgICAgbWVzc2FnZTogJ+WPquiDveS4iuS8oFBERuaWh+S7ticKICAgICAgICAvLyAgIH0pCiAgICAgICAgLy8gICByZXR1cm4gZmFsc2UKICAgICAgICAvLyB9CiAgICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgICBpZiAoZmlsZSAmJiBmaWxlLnR5cGUgJiYgKGZpbGUudHlwZSA9PT0gJ2ltYWdlL3BuZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvanBnJykpIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgICAgIG1lc3NhZ2U6ICflj6rog73lm77niYfmlofku7YnCiAgICAgICAgICB9KQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9LAogICAgICBnb1RvSGlzdG9yeSAoKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQogICAgICB9LAogICAgICBvbkNoYW5nZSAoZGF0YSkgewogICAgICAgIC8vIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdHZXRDb3Vyc2UnLCB7IHNjaG9vbElkOiBkYXRhIH0pCiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZFJvd0tleXNJbmNyZWFzZSA9IFtdCiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZExpc3RJbmZvID0gW10KICAgICAgfSwKICAgICAgY3VzdG9tUmVxdWVzdCAoZGF0YSkgewogICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGVzJywgZGF0YS5maWxlKQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncHJvY2Vzc19jb25maWdfdHlwZScsIHRoaXMuaW5pdERhdGEuaW5pdF92YWx1ZS5wcm9jZXNzX2NvbmZpZ190eXBlKQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncHJvY2Vzc19iYXNlX3dvcmtfZmxvd19udW1iZXInLCB0aGlzLmluaXREYXRhLmluaXRfdmFsdWUucHJvY2Vzc19iYXNlX3dvcmtfZmxvd19udW1iZXIpCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgIC8vIHNlcnZpY2UudXBsb2FkUHJvY2Vzc0ZpbGUoZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gICB0aGlzLiRub3RpZmljYXRpb24uc3VjY2Vzcyh7CiAgICAgICAgICAvLyAgICAgbWVzc2FnZTogJ+aWh+S7tuS4iuS8oOaIkOWKnycKICAgICAgICAgIC8vICAgfSkKICAgICAgICAgIC8vICAgdGhpcy5maWxlRGF0YSA9IHJlc3BvbnNlWzBdCiAgICAgICAgICAvLyB9KQogICAgICAgICAgLy8gICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy8gICB0aGlzLiRub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgLy8gICAgIG1lc3NhZ2U6ICfmlofku7bkuIrkvKDlpLHotKUnCiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyB9KQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgICAgLy8g5qCh6aqM55S16K+d5Y+356CB5piv5ZCm5qCH5YeGCiAgICAgICAgY2hlY2tUZWwgKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICAgICAgICBpZiAodmFsdWUgJiYgIWNoZWNrUGhvbmUodmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9ICfor7fovpPlhaXmraPnoa7moLzlvI/nmoTlj7fnoIEnCiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aXRsZSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc3VibWl0ICgpIHsKICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy4kcmVmcy5zdHVkZW50SW5mby5oYW5kbGVTdWJtaXQoKQogICAgICAgICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgICBnZXRTdHVkZW50QnlJZCh7IGlkOiB0aGlzLnVzZXJJbmZvLmlkIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3R1ZGVudCh7IC4uLnJlc3BvbnNlLCAuLi5wYXJhbXMgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVwZGF0ZVN0dWRlbnQgKGRhdGEpIHsKICAgICAgICAgICAgdXBkYXRlU3R1ZGVudChkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9ib29rL3N0dWRlbnQvdW5QYXllZCcgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["increaseNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"increaseNews.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <page-header-wrapper>\n    <template v-slot:content>\n      <div class=\"page-header-content\">\n      </div>\n    </template>\n    <div class=\"content\">\n      <div style=\"width:100%;padding:0 20px\">\n        <GlobalForm ref=\"newsInfo\" :dataSource=\"getFormData\" id=\"newsInfo\">\n          <template #editor>\n            <div id=\"editElem\" style=\"text-align: left\"></div>\n          </template>\n          <template #button>\n            <div style=\"margin-top:4px;text-align: right\">\n              <a-button type=\"primary\" @click=\"submit\">\n                提交\n              </a-button>\n            </div>\n          </template>\n        </GlobalForm>\n        <div class=\"formButton\" style=\"margin-top:20px;text-align: right\">\n          <a-button type=\"primary\" :style=\"{ marginLeft: '8px' }\" @click=\"onSubmit\" >\n            提交\n          </a-button>\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"goToHistory\">\n            取消\n          </a-button>\n        </div>\n      </div>\n    </div>\n  </page-header-wrapper>\n</template>\n\n<script>\n    import { formData } from './formData'\n    import { updateStudent, getStudentById } from '@/api/student'\n    import { checkPhone } from '@/utils/checkFun'\n    import E from 'wangeditor'\n\n    export default {\n        name: 'Index',\n        data () {\n            return {\n                userInfo: {},\n              editContent: ''\n            }\n        },\n        computed: {\n            getFormData () {\n                return formData.getIncreaseForm(this, 'news')\n            }\n        },\n        created () {\n            const userInfo = this.$store.getters.userInfo || {}\n            this.userInfo = userInfo\n        },\n        mounted () {\n          const editor = new E('#editElem')\n          editor.customConfig.showLinkImg = false\n          editor.customConfig.onchange = (h) => {\n            this.editContent = h\n          }\n          editor.create()\n        },\n        methods: {\n          onSubmit () {\n            const params = this.$refs.newsInfo.handleSubmit()\n            // console.log(params)\n            if (params) {\n            }\n          },\n          beforeUpload (file) {\n            // application/pdf\n            // console.log(file)\n            // if (file && file.name && (file.name.indexOf('.') !== -1) && file.name.split('.')[file.name.split('.').length - 1].toUpperCase() === 'PDF') {\n            //   return true\n            // } else {\n            //   this.$notification.error({\n            //     message: '只能上传PDF文件'\n            //   })\n            //   return false\n            // }\n            console.log(file)\n            if (file && file.type && (file.type === 'image/png' || file.type === 'image/jpeg' || file.type === 'image/jpg')) {\n              return true\n            } else {\n              this.$notification.error({\n                message: '只能图片文件'\n              })\n              return false\n            }\n          },\n          goToHistory () {\n            this.$router.go(-1)\n          },\n          onChange (data) {\n            // this.$store.dispatch('GetCourse', { schoolId: data })\n            // this.selectedRowKeysIncrease = []\n            // this.selectedListInfo = []\n          },\n          customRequest (data) {\n            const formData = new FormData()\n            formData.append('files', data.file)\n            formData.append('process_config_type', this.initData.init_value.process_config_type)\n            formData.append('process_base_work_flow_number', this.initData.init_value.process_base_work_flow_number)\n            return new Promise((resolve, reject) => {\n              // service.uploadProcessFile(formData).then(response => {\n              //   this.$notification.success({\n              //     message: '文件上传成功'\n              //   })\n              //   this.fileData = response[0]\n              // })\n              //         .catch(() => {\n              //   this.$notification.error({\n              //     message: '文件上传失败'\n              //   })\n              // })\n            })\n          },\n            // 校验电话号码是否标准\n            checkTel (rule, value, callback) {\n                if (value && !checkPhone(value)) {\n                    const title = '请输入正确格式的号码'\n                    callback(title)\n                } else {\n                    callback()\n                }\n            },\n            submit () {\n                const params = this.$refs.studentInfo.handleSubmit()\n                if (params) {\n                    getStudentById({ id: this.userInfo.id }).then(response => {\n                        this.updateStudent({ ...response, ...params })\n                    })\n                }\n            },\n            updateStudent (data) {\n                updateStudent(data).then(response => {\n                    this.$router.push({ path: '/book/student/unPayed' })\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    @import \"./style.less\";\n    .content{\n        background: #fff;\n        padding:60px 0;\n        border-radius:2px;\n        display: flex;\n        justify-content: center;\n    }\n</style>\n"]}]}