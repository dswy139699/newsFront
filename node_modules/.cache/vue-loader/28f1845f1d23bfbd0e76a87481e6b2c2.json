{"remainingRequest":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue?vue&type=style&index=0&id=99f5d262&scoped=true&lang=less&","dependencies":[{"path":"/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue","mtime":1650704211080},{"path":"/Users/yushengnan/bysj/ysn/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuL3N0eWxlLmxlc3MiOwouY29udGVudHsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBwYWRkaW5nOjYwcHggMDsKICAgIGJvcmRlci1yYWRpdXM6MnB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9Cg=="},{"version":3,"sources":["increaseNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"increaseNews.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <page-header-wrapper>\n    <template v-slot:content>\n      <div class=\"page-header-content\">\n      </div>\n    </template>\n    <div class=\"content\">\n      <div style=\"width:100%;padding:0 20px\">\n        <GlobalForm ref=\"newsInfo\" :dataSource=\"getFormData\" id=\"newsInfo\">\n          <template #editor>\n            <div id=\"editElem\" style=\"text-align: left\"></div>\n          </template>\n          <template #button>\n            <div style=\"margin-top:4px;text-align: right\">\n              <a-button type=\"primary\" @click=\"submit\">\n                提交\n              </a-button>\n            </div>\n          </template>\n        </GlobalForm>\n        <div class=\"formButton\" style=\"margin-top:20px;text-align: right\">\n          <a-button type=\"primary\" :style=\"{ marginLeft: '8px' }\" @click=\"onSubmit\" >\n            提交\n          </a-button>\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"goToHistory\">\n            取消\n          </a-button>\n        </div>\n      </div>\n    </div>\n  </page-header-wrapper>\n</template>\n\n<script>\n    import { formData } from './formData'\n    import { updateStudent, getStudentById } from '@/api/student'\n    import { checkPhone } from '@/utils/checkFun'\n    import E from 'wangeditor'\n\n    export default {\n        name: 'Index',\n        data () {\n            return {\n                userInfo: {},\n              editContent: ''\n            }\n        },\n        computed: {\n            getFormData () {\n                return formData.getIncreaseForm(this, 'news')\n            }\n        },\n        created () {\n            const userInfo = this.$store.getters.userInfo || {}\n            this.userInfo = userInfo\n        },\n        mounted () {\n          const editor = new E('#editElem')\n          editor.customConfig.showLinkImg = false\n          editor.customConfig.onchange = (h) => {\n            this.editContent = h\n          }\n          editor.create()\n        },\n        methods: {\n          onSubmit () {\n            const params = this.$refs.newsInfo.handleSubmit()\n            // console.log(params)\n            if (params) {\n            }\n          },\n          beforeUpload (file) {\n            // application/pdf\n            // console.log(file)\n            // if (file && file.name && (file.name.indexOf('.') !== -1) && file.name.split('.')[file.name.split('.').length - 1].toUpperCase() === 'PDF') {\n            //   return true\n            // } else {\n            //   this.$notification.error({\n            //     message: '只能上传PDF文件'\n            //   })\n            //   return false\n            // }\n            console.log(file)\n            if (file && file.type && (file.type === 'image/png' || file.type === 'image/jpeg' || file.type === 'image/jpg')) {\n              return true\n            } else {\n              this.$notification.error({\n                message: '只能图片文件'\n              })\n              return false\n            }\n          },\n          goToHistory () {\n            this.$router.go(-1)\n          },\n          onChange (data) {\n            // this.$store.dispatch('GetCourse', { schoolId: data })\n            // this.selectedRowKeysIncrease = []\n            // this.selectedListInfo = []\n          },\n          customRequest (data) {\n            const formData = new FormData()\n            formData.append('files', data.file)\n            formData.append('process_config_type', this.initData.init_value.process_config_type)\n            formData.append('process_base_work_flow_number', this.initData.init_value.process_base_work_flow_number)\n            return new Promise((resolve, reject) => {\n              // service.uploadProcessFile(formData).then(response => {\n              //   this.$notification.success({\n              //     message: '文件上传成功'\n              //   })\n              //   this.fileData = response[0]\n              // })\n              //         .catch(() => {\n              //   this.$notification.error({\n              //     message: '文件上传失败'\n              //   })\n              // })\n            })\n          },\n            // 校验电话号码是否标准\n            checkTel (rule, value, callback) {\n                if (value && !checkPhone(value)) {\n                    const title = '请输入正确格式的号码'\n                    callback(title)\n                } else {\n                    callback()\n                }\n            },\n            submit () {\n                const params = this.$refs.studentInfo.handleSubmit()\n                if (params) {\n                    getStudentById({ id: this.userInfo.id }).then(response => {\n                        this.updateStudent({ ...response, ...params })\n                    })\n                }\n            },\n            updateStudent (data) {\n                updateStudent(data).then(response => {\n                    this.$router.push({ path: '/book/student/unPayed' })\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    @import \"./style.less\";\n    .content{\n        background: #fff;\n        padding:60px 0;\n        border-radius:2px;\n        display: flex;\n        justify-content: center;\n    }\n</style>\n"]}]}