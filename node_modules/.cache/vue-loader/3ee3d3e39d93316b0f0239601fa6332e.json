{"remainingRequest":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yushengnan/bysj/ysn/src/views/increaseNews.vue","mtime":1650701354867},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yushengnan/bysj/ysn/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZvcm1EYXRhIH0gZnJvbSAnLi9mb3JtRGF0YScKaW1wb3J0IHsgdXBkYXRlU3R1ZGVudCwgZ2V0U3R1ZGVudEJ5SWQgfSBmcm9tICdAL2FwaS9zdHVkZW50JwppbXBvcnQgeyBjaGVja1Bob25lIH0gZnJvbSAnQC91dGlscy9jaGVja0Z1bicKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdJbmRleCcsCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB1c2VySW5mbzoge30KICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBnZXRGb3JtRGF0YSAoKSB7CiAgICAgICAgICAgIHJldHVybiBmb3JtRGF0YS5nZXRJbmNyZWFzZUZvcm0odGhpcywgJ25ld3MnKQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkICgpIHsKICAgICAgICBjb25zdCB1c2VySW5mbyA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlckluZm8gfHwge30KICAgICAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm8KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIGJlZm9yZVVwbG9hZCAoZmlsZSkgewogICAgICAgIC8vIGFwcGxpY2F0aW9uL3BkZgogICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgICAgLy8gaWYgKGZpbGUgJiYgZmlsZS5uYW1lICYmIChmaWxlLm5hbWUuaW5kZXhPZignLicpICE9PSAtMSkgJiYgZmlsZS5uYW1lLnNwbGl0KCcuJylbZmlsZS5uYW1lLnNwbGl0KCcuJykubGVuZ3RoIC0gMV0udG9VcHBlckNhc2UoKSA9PT0gJ1BERicpIHsKICAgICAgICAvLyAgIHJldHVybiB0cnVlCiAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAvLyAgIHRoaXMuJG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgLy8gICAgIG1lc3NhZ2U6ICflj6rog73kuIrkvKBQREbmlofku7YnCiAgICAgICAgLy8gICB9KQogICAgICAgIC8vICAgcmV0dXJuIGZhbHNlCiAgICAgICAgLy8gfQogICAgICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgICAgaWYgKGZpbGUgJiYgZmlsZS50eXBlICYmIChmaWxlLnR5cGUgPT09ICdpbWFnZS9wbmcnIHx8IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnIHx8IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZycpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgICAgICBtZXNzYWdlOiAn5Y+q6IO95Zu+54mH5paH5Lu2JwogICAgICAgICAgfSkKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSwKICAgICAgb25DaGFuZ2UgKGRhdGEpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnR2V0Q291cnNlJywgeyBzY2hvb2xJZDogZGF0YSB9KQogICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dLZXlzSW5jcmVhc2UgPSBbXQogICAgICAgIHRoaXMuc2VsZWN0ZWRMaXN0SW5mbyA9IFtdCiAgICAgIH0sCiAgICAgIGN1c3RvbVJlcXVlc3QgKGRhdGEpIHsKICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlcycsIGRhdGEuZmlsZSkKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Byb2Nlc3NfY29uZmlnX3R5cGUnLCB0aGlzLmluaXREYXRhLmluaXRfdmFsdWUucHJvY2Vzc19jb25maWdfdHlwZSkKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Byb2Nlc3NfYmFzZV93b3JrX2Zsb3dfbnVtYmVyJywgdGhpcy5pbml0RGF0YS5pbml0X3ZhbHVlLnByb2Nlc3NfYmFzZV93b3JrX2Zsb3dfbnVtYmVyKQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAvLyBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NGaWxlKGZvcm1EYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8vICAgdGhpcy4kbm90aWZpY2F0aW9uLnN1Y2Nlc3MoewogICAgICAgICAgLy8gICAgIG1lc3NhZ2U6ICfmlofku7bkuIrkvKDmiJDlip8nCiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyAgIHRoaXMuZmlsZURhdGEgPSByZXNwb25zZVswXQogICAgICAgICAgLy8gfSkKICAgICAgICAgIC8vICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIC8vICAgdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgIC8vICAgICBtZXNzYWdlOiAn5paH5Lu25LiK5Lyg5aSx6LSlJwogICAgICAgICAgLy8gICB9KQogICAgICAgICAgLy8gfSkKICAgICAgICB9KQogICAgICB9LAogICAgICAgIC8vIOagoemqjOeUteivneWPt+eggeaYr+WQpuagh+WHhgogICAgICAgIGNoZWNrVGVsIChydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaWYgKHZhbHVlICYmICFjaGVja1Bob25lKHZhbHVlKSkgewogICAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSAn6K+36L6T5YWl5q2j56Gu5qC85byP55qE5Y+356CBJwogICAgICAgICAgICAgICAgY2FsbGJhY2sodGl0bGUpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHN1Ym1pdCAoKSB7CiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuJHJlZnMuc3R1ZGVudEluZm8uaGFuZGxlU3VibWl0KCkKICAgICAgICAgICAgaWYgKHBhcmFtcykgewogICAgICAgICAgICAgICAgZ2V0U3R1ZGVudEJ5SWQoeyBpZDogdGhpcy51c2VySW5mby5pZCB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0dWRlbnQoeyAuLi5yZXNwb25zZSwgLi4ucGFyYW1zIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVTdHVkZW50IChkYXRhKSB7CiAgICAgICAgICAgIHVwZGF0ZVN0dWRlbnQoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYm9vay9zdHVkZW50L3VuUGF5ZWQnIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["increaseNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"increaseNews.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <page-header-wrapper>\n    <template v-slot:content>\n      <div class=\"page-header-content\">\n      </div>\n    </template>\n    <div class=\"content\">\n      <div style=\"width:100%;\">\n        <GlobalForm ref=\"studentInfo\" :dataSource=\"getFormData\" id=\"studentInfo\">\n          <template #button>\n            <div style=\"margin-top:4px;text-align: right\">\n              <a-button type=\"primary\" @click=\"submit\">\n                提交\n              </a-button>\n            </div>\n          </template>\n        </GlobalForm>\n      </div>\n    </div>\n  </page-header-wrapper>\n</template>\n\n<script>\n    import { formData } from './formData'\n    import { updateStudent, getStudentById } from '@/api/student'\n    import { checkPhone } from '@/utils/checkFun'\n\n    export default {\n        name: 'Index',\n        data () {\n            return {\n                userInfo: {}\n            }\n        },\n        computed: {\n            getFormData () {\n                return formData.getIncreaseForm(this, 'news')\n            }\n        },\n        created () {\n            const userInfo = this.$store.getters.userInfo || {}\n            this.userInfo = userInfo\n        },\n        mounted () {\n        },\n        methods: {\n          beforeUpload (file) {\n            // application/pdf\n            // console.log(file)\n            // if (file && file.name && (file.name.indexOf('.') !== -1) && file.name.split('.')[file.name.split('.').length - 1].toUpperCase() === 'PDF') {\n            //   return true\n            // } else {\n            //   this.$notification.error({\n            //     message: '只能上传PDF文件'\n            //   })\n            //   return false\n            // }\n            console.log(file)\n            if (file && file.type && (file.type === 'image/png' || file.type === 'image/jpeg' || file.type === 'image/jpg')) {\n              return true\n            } else {\n              this.$notification.error({\n                message: '只能图片文件'\n              })\n              return false\n            }\n          },\n          onChange (data) {\n            this.$store.dispatch('GetCourse', { schoolId: data })\n            this.selectedRowKeysIncrease = []\n            this.selectedListInfo = []\n          },\n          customRequest (data) {\n            const formData = new FormData()\n            formData.append('files', data.file)\n            formData.append('process_config_type', this.initData.init_value.process_config_type)\n            formData.append('process_base_work_flow_number', this.initData.init_value.process_base_work_flow_number)\n            return new Promise((resolve, reject) => {\n              // service.uploadProcessFile(formData).then(response => {\n              //   this.$notification.success({\n              //     message: '文件上传成功'\n              //   })\n              //   this.fileData = response[0]\n              // })\n              //         .catch(() => {\n              //   this.$notification.error({\n              //     message: '文件上传失败'\n              //   })\n              // })\n            })\n          },\n            // 校验电话号码是否标准\n            checkTel (rule, value, callback) {\n                if (value && !checkPhone(value)) {\n                    const title = '请输入正确格式的号码'\n                    callback(title)\n                } else {\n                    callback()\n                }\n            },\n            submit () {\n                const params = this.$refs.studentInfo.handleSubmit()\n                if (params) {\n                    getStudentById({ id: this.userInfo.id }).then(response => {\n                        this.updateStudent({ ...response, ...params })\n                    })\n                }\n            },\n            updateStudent (data) {\n                updateStudent(data).then(response => {\n                    this.$router.push({ path: '/book/student/unPayed' })\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    @import \"./style.less\";\n    .content{\n        background: #fff;\n        padding:60px 0;\n        border-radius:2px;\n        display: flex;\n        justify-content: center;\n    }\n</style>\n"]}]}