(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"6c6c":function(e,t,r){},ac2a:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form,"label-col":{span:5},"wrapper-col":{span:19}},on:{submit:e.handleSubmit}},[r("div",{staticStyle:{"margin-top":"70px"}},[e.isLoginError?r("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:"账户或密码错误"}}):e._e(),r("a-form-item",{attrs:{label:"用户名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginId",{rules:[{required:!0,message:"请输入用户名"}]}],expression:"[\n            'loginId',\n            {rules: [{ required: true, message: '请输入用户名' }]}\n          ]"}],attrs:{size:"large",type:"text",placeholder:"请输入用户名"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",{attrs:{label:"密码"}},[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginPwd",{rules:[{required:!0,message:"请输入密码"}]}],expression:"[\n            'loginPwd',\n            {rules: [{ required: true, message: '请输入密码' }]}\n          ]"}],attrs:{size:"large",placeholder:"请输入密码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),r("a-form-item",{staticStyle:{"margin-top":"24px"},attrs:{"wrapper-col":{span:19,offset:5}}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.state.loginBtn,disabled:e.state.loginBtn}},[e._v("确定")])],1)],1)],1)},o=[],a=(r("d3b7"),r("4795"),r("5530")),i=r("5880"),n={components:{},data:function(){return{customActiveKey:"tab1",loginBtn:!1,loginType:0,isLoginError:!1,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1}}},created:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(i["mapActions"])(["Login","Logout","GetSchool","GetClass"])),{},{handleSubmit:function(e){var t=this;e.preventDefault();var r=this.form.validateFields,s=this.state,o=this.Login;s.loginBtn=!0,r((function(e,r){if(e)setTimeout((function(){s.loginBtn=!1}),600);else{var i=Object(a["a"])({},r);o(i).then((function(e){return t.loginSuccess(e)}))["catch"]((function(e){return t.requestFailed(e)}))["finally"]((function(){s.loginBtn=!1}))}}))},loginSuccess:function(e){var t=this;this.GetSchool().then()["catch"]()["finally"]((function(r){t.GetClass().then(),t.$store.dispatch("GenerateRoutes",{roles:[],user:e.user||{}}).then((function(){t.$router.addRoutes(t.$store.getters.addRouters),e&&e.user&&e.user.userType&&"school"===e.user.userType?t.$router.push({path:"/book/solicitManage/courseManage"}):e&&e.user&&e.user.userType&&"student"===e.user.userType&&t.$router.push({path:"/book/student/unPayed"})}))})),this.isLoginError=!1},requestFailed:function(e){this.isLoginError=!0,this.$notification["error"]({message:"错误",description:((e.response||{}).data||{}).message||"请求出现错误，请稍后再试",duration:4})}})},l=n,u=(r("e272"),r("2877")),c=Object(u["a"])(l,s,o,!1,null,"5709a180",null);t["default"]=c.exports},e272:function(e,t,r){"use strict";r("6c6c")}}]);